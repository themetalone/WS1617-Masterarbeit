CREATE USER IF NOT EXISTS simulation PASSWORD 'simulation' ADMIN;
CREATE SCHEMA IF NOT EXISTS PANDEMIC AUTHORIZATION simulation;
CREATE TABLE IF NOT EXISTS PANDEMIC.POPULATIONS (POPID INTEGER, NAME VARCHAR(255), LIFE FLOAT, MIGRATION FLOAT, PRIMARY KEY (POPID));
CREATE TABLE IF NOT EXISTS PANDEMIC.HEALTHSTATES (POPID INTEGER, HSID INTEGER ,NAME VARCHAR(255), SIZE BIGINT, PRIMARY KEY (POPID, HSID), FOREIGN KEY (POPID) REFERENCES PANDEMIC.POPULATIONS (POPID));
CREATE TABLE IF NOT EXISTS PANDEMIC.HEALTHSTATESTATES (POPID INTEGER, HSID INTEGER, TICK BIGINT, SIZE BIGINT, PRIMARY KEY(POPID, HSID, TICK), FOREIGN KEY (POPID, HSID) REFERENCES PANDEMIC.HEALTHSTATES (POPID, HSID));
CREATE TABLE IF NOT EXISTS PANDEMIC.TRANSMISSIONS (SRCPOPID INTEGER, SRCHSID INTEGER, TRGPOPID INTEGER, TRGHSID INTEGER, TYP INTEGER, PRIORITY INTEGER, DESCRIPTION VARCHAR(255), PRIMARY KEY(SRCPOPID, SRCHSID, TRGPOPID, TRGHSID, TYPE), FOREIGN KEY (SRCPOPID, SRCHSID) REFERENCES PANDEMIC.HEALTHSTATES (POPID, HSID), FOREIGN KEY (TRGPOPID, TRGHSID) REFERENCES PANDEMIC.HEALTHSTATES (POPID, HSID));
CREATE TABLE IF NOT EXISTS PANDEMIC.TRANSMISSIONSTATES (SRCPOPID INTEGER, SRCHSID INTEGER, TRGPOPID INTEGER, TRGHSID INTEGER, TYP INTEGER, TICK BIGINT, VOLUME BIGINT, PRIMARY KEY(SRCPOPID, SRCHSID, TRGPOPID, TRGHSID, TYPE, TICK), FOREIGN KEY (SRCPOPID, SRCHSID, TRGPOPID, TRGHSID, TYPE) REFERENCES PANDEMIC.TRANSMISSIONS (SRCPOPID, SRCHSID, TRGPOPID, TRGHSID, TYPE));
DELETE FROM PANDEMIC.HEALTHSTATESTATES WHERE TRUE;
DELETE FROM PANDEMIC.TRANSMISSIONSTATES WHERE TRUE;
DELETE FROM PANDEMIC.TRANSMISSIONS WHERE TRUE;
DELETE FROM PANDEMIC.HEALTHSTATES WHERE TRUE;
DELETE FROM PANDEMIC.POPULATIONS WHERE TRUE;